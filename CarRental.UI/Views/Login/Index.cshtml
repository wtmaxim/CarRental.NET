@model CarRental.Model.UserDTO
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Login</title>

    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/AdminLTE.min.css" rel="stylesheet" />
    <link href="~/Content/Ionicons/css/ionicons.min.css" rel="stylesheet" />
    <link href="~/Content/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
</head>
<body class="hold-transition login-page">
    <div class="login-box">
        <div class="login-logo">
            <a href="/"><b>Car</b>Rental</a>
        </div>
        <!-- /.login-logo -->
        <div class="login-box-body">

            <p class="login-box-msg">Connectez vous !</p>

            @using (Html.BeginForm("Autherize", "Login", FormMethod.Post))

            {
                <div class="form-group has-feedback row">
                    <div class="col-xs-12 col-md-4">
                        @Html.LabelFor(model => model.Email)
                    </div>
                    <div class="col-xs-12 col-md-8">
                        @Html.EditorFor(model => model.Email, new { @class = "form-control" })<br />
                        @Html.ValidationMessageFor(model => model.Email)
                    </div>
                </div>
                <div class="form-group has-feedback row">
                    <div class="col-xs-12 col-md-4">
                        @Html.LabelFor(model => model.Password)
                    </div>
                    <div class="col-xs-12 col-md-8">
                        @Html.EditorFor(model => model.Password)<br />
                        @Html.ValidationMessageFor(model => model.Password)
                    </div>
                </div>
                <div class="row">
                    <label class="field-validation-error">@Html.DisplayFor(model => model.LoginErrorMessage)</label>
                </div>
                <div class="row">
                    <input type="submit" class="btn btn-primary btn-block btn-flat" value="Connexion">
                </div>
            }
            <div class="row">
                <a href="#">J'ai oublié mon mot de passe</a>
             </div>
        </div>
        <!-- /.login-box-body -->
    </div>

    <!-- /.login-box -->

    @Scripts.Render("~/bundles/bootstrap")
    @Scripts.Render("~/bundles/select2")
    <script src="~/Scripts/jquery-3.3.1.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
</body>
</html>


<script>
   function Validate() {
    $.ajax(
    {
    type: "POST",
    url: '@Url.Action("Login", "Utilisateur")',
    data: {
    email: $('#email').val(),
    password: $('#password').val()
    },
    error: function (result) {
    alert("There is a Problem, Try Again!");
    },
    success: function (result) {
    console.log(result);
    if (result.status == true) {
    window.location.href = '@Url.Action("Index", "Home")';
    }
    else {
    alert(result.message);
    }
    }
    });
    }
</script>

<style>
    .field-validation-error {
        color: red;
    }
</style>